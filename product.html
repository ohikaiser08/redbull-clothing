<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Product • RedBull Clothing</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#FFF8EC;
      --text:#111;
      --muted:#555;
      --red:#C91414;
      --card:#fff;
      --shadow:0 15px 35px rgba(0,0,0,0.10);
      --radius:20px;
    }
    *{margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif;}
    body{background:var(--bg);color:var(--text);}
    a{text-decoration:none;color:inherit;}

    header{
      position:fixed; inset:0 0 auto 0;
      height:84px;
      display:flex; align-items:center; justify-content:space-between;
      padding:0 60px;
      background:linear-gradient(90deg,#111,#1c1c1c);
      border-bottom:2px solid var(--red);
      z-index:9999;
    }
    .brand{display:flex;align-items:center;gap:14px;}
    .brand img{height:58px;background:#fff;padding:4px;border-radius:10px;}
    .cart-btn{
      display:inline-flex; align-items:center; gap:10px;
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      color:#fff; padding:10px 12px; border-radius:12px;
      cursor:pointer; font-weight:900;
    }
    .badge{
      min-width:22px; height:22px;
      display:inline-flex; align-items:center; justify-content:center;
      background:var(--red); color:#fff;
      border-radius:999px; font-size:12px; padding:0 7px;
    }

    main{padding:130px 22px 70px;}
    .wrap{max-width:1100px;margin:0 auto;}
    .back{
      display:inline-flex; gap:10px; align-items:center;
      font-weight:800; color:#111;
      background:#fff; border:1px solid rgba(0,0,0,.08);
      padding:10px 12px; border-radius:14px;
      box-shadow:var(--shadow);
    }

    .card{
      margin-top:18px;
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      border:1px solid rgba(0,0,0,0.06);
      display:grid;
      grid-template-columns:1.1fr 0.9fr;
    }
    .img{background:#eee; min-height:420px;}
    .img img{width:100%;height:100%;object-fit:cover;display:block;}

    .info{padding:22px 22px 24px;}
    h1{font-size:32px; letter-spacing:-0.4px;}
    .meta{margin-top:6px;color:var(--muted);font-weight:700;}
    .price{margin-top:14px;font-size:22px;font-weight:900;color:var(--red);}

    .desc{margin-top:12px;color:#333;line-height:1.6;}

    .row{
      margin-top:18px;
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
    }
    select{
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(0,0,0,0.12);
      background:#fff;
      font-weight:800;
      cursor:pointer;
    }

    .btn{
      border:none; cursor:pointer;
      padding:14px 18px; border-radius:14px;
      font-weight:900;
      transition:.2s;
    }
    .btn-primary{background:var(--red);color:#fff; box-shadow:0 16px 35px rgba(201,20,20,0.26);}
    .btn-primary:hover{transform:translateY(-1px);}
    .btn-dark{background:#111;color:#fff;}
    .btn-dark:hover{transform:translateY(-1px);}

    /* CART DRAWER */
    .overlay{
      position:fixed; inset:0;
      background:rgba(0,0,0,0.55);
      display:none; z-index:9998;
    }
    .overlay.show{display:block;}
    .drawer{
      position:fixed; top:0; right:0;
      width:min(420px, 92vw); height:100vh;
      background:#fff;
      transform:translateX(110%);
      transition:transform .25s ease;
      z-index:9999;
      display:flex; flex-direction:column;
      border-left:1px solid rgba(0,0,0,0.08);
    }
    .drawer.show{transform:translateX(0);}
    .drawer-head{
      padding:16px 16px;
      display:flex; align-items:center; justify-content:space-between;
      border-bottom:1px solid rgba(0,0,0,0.08);
    }
    .close-btn{
      border:none; background:#f2f2f2; cursor:pointer;
      padding:10px 12px; border-radius:12px; font-weight:900;
    }
    .cart-list{padding:14px 16px; overflow:auto; flex:1;}
    .cart-item{
      display:grid;
      grid-template-columns:64px 1fr auto;
      gap:10px;
      padding:12px 0;
      border-bottom:1px solid rgba(0,0,0,0.07);
      align-items:center;
    }
    .cart-item img{width:64px;height:56px;object-fit:cover;border-radius:12px;}
    .ci-title{font-weight:900;font-size:14px;}
    .ci-meta{color:#666;font-size:12px;margin-top:2px;}
    .qty{display:flex;align-items:center;gap:8px;}
    .qbtn{
      width:32px;height:32px;border-radius:10px;
      border:1px solid rgba(0,0,0,0.12); background:#fff;
      cursor:pointer;font-weight:900;
    }
    .cart-foot{
      padding:14px 16px;
      border-top:1px solid rgba(0,0,0,0.08);
      background:#fff;
    }
    .tot{display:flex;justify-content:space-between;font-weight:900;margin-bottom:12px;}
    .checkout{
      width:100%; border:none; cursor:pointer;
      background:var(--red); color:#fff;
      padding:14px 14px; border-radius:14px;
      font-weight:900;
      box-shadow:0 16px 35px rgba(201,20,20,0.26);
    }
    .clear{
      width:100%; margin-top:10px;
      border:1px solid rgba(0,0,0,0.10);
      background:#fff;
      padding:12px 14px; border-radius:14px;
      font-weight:900; cursor:pointer;
    }

    @media (max-width: 980px){
      header{padding:0 22px;}
      .card{grid-template-columns:1fr;}
      .img{min-height:320px;}
    }
  </style>
</head>

<body>
  <header>
    <div class="brand">
      <a href="index.html"><img src="logo.png" alt="Logo"></a>
    </div>
    <button class="cart-btn" id="cartOpenBtn" type="button">Cart <span class="badge" id="cartCount">0</span></button>
  </header>

  <main>
    <div class="wrap">
      <a class="back" href="index.html">← Back to Home</a>

      <div class="card" id="productCard" style="display:none;">
        <div class="img"><img id="pImg" alt=""></div>
        <div class="info">
          <h1 id="pName"></h1>
          <div class="meta" id="pMeta"></div>
          <div class="price" id="pPrice"></div>
          <div class="desc" id="pDesc"></div>

          <div class="row">
            <select id="sizeSelect"></select>
            <button class="btn btn-primary" id="addBtn" type="button">Add to Cart</button>
            <button class="btn btn-dark" id="buyBtn" type="button">Buy on WhatsApp</button>
          </div>
        </div>
      </div>

      <div id="notFound" style="margin-top:18px; font-weight:900; color:#111; display:none;">
        Product not found.
      </div>
    </div>
  </main>

  <!-- Cart Drawer -->
  <div class="overlay" id="overlay"></div>
  <aside class="drawer" id="drawer">
    <div class="drawer-head">
      <h3>Your Cart</h3>
      <button class="close-btn" id="cartCloseBtn" type="button">✕</button>
    </div>

    <div class="cart-list" id="cartList"></div>

    <div class="cart-foot">
      <div class="tot">
        <div>Total</div>
        <div id="cartTotal">৳ 0</div>
      </div>
      <button class="checkout" id="checkoutBtn" type="button">Checkout on WhatsApp</button>
      <button class="clear" id="clearBtn" type="button">Clear Cart</button>
    </div>
  </aside>

  <script>
    // Same product data as index.html
    const PRODUCTS = [
      { sku:"TSHIRT-001", name:"Premium T-Shirt", cat:"street", price:890, img:"https://images.unsplash.com/photo-1520975916090-3105956dac38?auto=format&fit=crop&w=1200&q=80", desc:"Soft premium fabric, everyday fit, durable print.", sizes:["S","M","L","XL"] },
      { sku:"HOODIE-001", name:"Urban Hoodie", cat:"street", price:1990, img:"https://images.unsplash.com/photo-1556905055-8f358a7a47b2?auto=format&fit=crop&w=1200&q=80", desc:"Warm comfort, clean street look, heavy feel.", sizes:["M","L","XL"] },
      { sku:"PANTS-001", name:"Street Pants", cat:"street", price:1590, img:"https://images.unsplash.com/photo-1544441893-675973e31985?auto=format&fit=crop&w=1200&q=80", desc:"Modern tapered fit, confident clean style.", sizes:["30","32","34","36"] },

      { sku:"PUN-001", name:"Classic Punjabi", cat:"punjabi", price:2490, img:"https://images.unsplash.com/photo-1602810318383-e386cc2a3ccf?auto=format&fit=crop&w=1200&q=80", desc:"Classic cut with premium finishing.", sizes:["M","L","XL"] },
      { sku:"PUN-002", name:"Festive Punjabi", cat:"punjabi", price:2990, img:"https://images.unsplash.com/photo-1603252109360-909baaf261c3?auto=format&fit=crop&w=1200&q=80", desc:"Festive premium look, elegant vibe.", sizes:["M","L","XL"] },
      { sku:"PUN-003", name:"Limited Drop Punjabi", cat:"punjabi", price:2790, img:"https://images.unsplash.com/photo-1520975916090-3105956dac38?auto=format&fit=crop&w=1200&q=80", desc:"Limited drop — premium fabric, sharp style.", sizes:["M","L","XL"] },
    ];

    const formatBDT = (n) => `৳ ${Number(n).toLocaleString("en-US")}`;
    const getProduct = (sku) => PRODUCTS.find(p => p.sku === sku);

    // Read SKU from query
    const params = new URLSearchParams(window.location.search);
    const sku = params.get("sku");
    const p = getProduct(sku);

    const productCard = document.getElementById("productCard");
    const notFound = document.getElementById("notFound");

    if(!p){
      notFound.style.display = "block";
    }else{
      productCard.style.display = "grid";
      document.getElementById("pImg").src = p.img;
      document.getElementById("pImg").alt = p.name;
      document.getElementById("pName").textContent = p.name;
      document.getElementById("pMeta").textContent = (p.cat === "street" ? "Street Collection" : "Punjabi Collection") + " • SKU: " + p.sku;
      document.getElementById("pPrice").textContent = formatBDT(p.price);
      document.getElementById("pDesc").textContent = p.desc;

      const sizeSelect = document.getElementById("sizeSelect");
      sizeSelect.innerHTML = p.sizes.map(s => `<option value="${s}">${s}</option>`).join("");
    }

    // CART
    const CART_KEY = "rb_cart_v1";
    const loadCart = () => { try { return JSON.parse(localStorage.getItem(CART_KEY)) || []; } catch { return []; } };
    const saveCart = (cart) => localStorage.setItem(CART_KEY, JSON.stringify(cart));
    const cartCount = (cart) => cart.reduce((sum, it) => sum + it.qty, 0);
    const cartTotal = (cart) => cart.reduce((sum, it) => sum + (it.price * it.qty), 0);

    function addToCart(sku, size){
      const p = getProduct(sku);
      if(!p) return;
      const cart = loadCart();
      const existing = cart.find(x => x.sku===sku && x.size===size);
      if(existing) existing.qty += 1;
      else cart.push({ sku, name:p.name, price:p.price, img:p.img, size, qty:1 });
      saveCart(cart);
      renderCartUI();
      openCart();
    }

    function changeQty(index, delta){
      const cart = loadCart();
      if(!cart[index]) return;
      cart[index].qty += delta;
      if(cart[index].qty <= 0) cart.splice(index,1);
      saveCart(cart);
      renderCartUI();
    }

    function clearCart(){
      saveCart([]);
      renderCartUI();
    }

    // Drawer
    const cartCountEl = document.getElementById("cartCount");
    const cartListEl = document.getElementById("cartList");
    const cartTotalEl = document.getElementById("cartTotal");
    const overlay = document.getElementById("overlay");
    const drawer = document.getElementById("drawer");
    const cartOpenBtn = document.getElementById("cartOpenBtn");
    const cartCloseBtn = document.getElementById("cartCloseBtn");
    const clearBtn = document.getElementById("clearBtn");
    const checkoutBtn = document.getElementById("checkoutBtn");

    function openCart(){ overlay.classList.add("show"); drawer.classList.add("show"); }
    function closeCart(){ overlay.classList.remove("show"); drawer.classList.remove("show"); }

    function renderCartUI(){
      const cart = loadCart();
      cartCountEl.textContent = cartCount(cart);
      cartTotalEl.textContent = formatBDT(cartTotal(cart));

      if(cart.length === 0){
        cartListEl.innerHTML = `<p style="color:#555; font-weight:800;">Your cart is empty.</p>`;
        return;
      }

      cartListEl.innerHTML = cart.map((it, idx) => `
        <div class="cart-item">
          <img src="${it.img}" alt="${it.name}">
          <div>
            <div class="ci-title">${it.name}</div>
            <div class="ci-meta">Size: ${it.size} • ${formatBDT(it.price)}</div>
          </div>
          <div class="qty">
            <button class="qbtn" data-qminus="${idx}" type="button">−</button>
            <div style="min-width:16px;text-align:center;font-weight:900;">${it.qty}</div>
            <button class="qbtn" data-qplus="${idx}" type="button">+</button>
          </div>
        </div>
      `).join("");
    }

    // Buttons
    if(p){
      document.getElementById("addBtn").addEventListener("click", () => {
        const size = document.getElementById("sizeSelect").value;
        addToCart(p.sku, size);
      });

      document.getElementById("buyBtn").addEventListener("click", () => {
        const size = document.getElementById("sizeSelect").value;
        const msg =
`Order Request - RedBull Clothing
• ${p.name} (Size: ${size}) x1 = ৳${p.price}

Name:
Address:
Phone:
Delivery area:`;
        const url = "https://wa.me/8801732689835?text=" + encodeURIComponent(msg);
        window.open(url, "_blank");
      });
    }

    document.addEventListener("click", (e) => {
      const minus = e.target.getAttribute("data-qminus");
      const plus = e.target.getAttribute("data-qplus");
      if(minus !== null) changeQty(Number(minus), -1);
      if(plus !== null) changeQty(Number(plus), +1);
    });

    cartOpenBtn.addEventListener("click", openCart);
    cartCloseBtn.addEventListener("click", closeCart);
    overlay.addEventListener("click", closeCart);
    clearBtn.addEventListener("click", clearCart);

    checkoutBtn.addEventListener("click", () => {
      const cart = loadCart();
      if(cart.length === 0){ alert("Cart is empty."); return; }

      const total = cartTotal(cart);
      const lines = cart.map(it => `• ${it.name} (Size: ${it.size}) x${it.qty} = ৳${it.price * it.qty}`);
      const msg =
`Order Request - RedBull Clothing
${lines.join("\n")}
Total: ৳${total}

Name:
Address:
Phone:
Delivery area:`;

      const url = "https://wa.me/8801732689835?text=" + encodeURIComponent(msg);
      window.open(url, "_blank");
    });

    // init
    renderCartUI();
  </script>
</body>
</html>
